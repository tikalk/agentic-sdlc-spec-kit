# Per-Spec Mode Implementation Notes

## Status: Phase 2 In Progress

### Completed (Phase 1):
- âœ… Created detect-workflow-config.sh and .ps1
- âœ… Exported to common.sh/ps1
- âœ… All tests passing

### Completed (Phase 2 Partial):
- âœ… Updated /specify template with parameters
- âœ… Updated spec-template.md and spec-template-build.md with metadata
- âœ… Added parameter parsing to create-new-feature.sh

### In Progress:
- ðŸ”„ Complete create-new-feature.sh (lines 331-380 need mode variable substitution)
- ðŸ”„ Update /architect to accept --mode parameters
- ðŸ”„ Update /plan, /tasks, /implement to auto-detect from spec.md

### Remaining:
- Update create-new-feature.ps1
- Remove /mode command
- Update config.json schema
- Documentation updates
- End-to-end testing

## Key Design Decision:
- `/specify` and `/architect` â†’ Accept mode parameters (CREATE documents)
- `/plan`, `/tasks`, `/implement` â†’ Auto-detect from spec.md (READ mode)
- No redundant mode parameters in downstream commands
